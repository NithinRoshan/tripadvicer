(this.$WP=this.$WP||[]).push(["7l5hpv",(e,t)=>{var a,l,r,n,i,u,o,s,c,d,T,y,p,h,g,m,O,I,S,R,E,N,_,A,f,L,C=e=>{var t=`${y().toString(16).padStart(16,"0")}.ssid`;return e??t},v=(e,t,r,n,i,u,o)=>{var[s,c]=a(""),[d,T]=a(n),y=p(),g=h(),m=null!=i.geoId&&i.geoId>1?i.geoId:1,O=l(()=>{T(n);var t=String(Date.now());c(t),y({team:"Search",actionSubType:"Typeahead",actionType:"interact",itemName:"StartEvent",itemType:"Typeahead",customData:JSON.stringify({typeaheadId:t,searchSessionId:e,uiOrigin:r,scope:String(m),beforeQuery:n,afterQuery:n,totalNum:u})})},[r,e,n,T,m,y,u]),I=l(t=>{g({team:"Search",itemType:"Typeahead",itemName:"Search_Typeahead_Open_Imp",customData:JSON.stringify({typeaheadId:s,searchSessionId:e,uiOrigin:r,scope:String(m),beforeQuery:n,afterQuery:n,totalNum:u,...t})})},[g,s,e,r,m,n,u]),S=l((a,l,i,c,T,p,h,g,O,I,S,R,E,N)=>{var _={typeaheadId:s,searchSessionId:e,resultsId:t,uiOrigin:r,scope:String(m),beforeQuery:d,afterQuery:n,totalNum:u,value:p,errors:o?[o]:null,fromHistory:l,selDepth:i+1,placeType:h||null,dataType:T,selectionUrl:g||null,selectionMethod:a,selectedDocumentId:p,durationResultsShown:c?Date.now()-c:-1,text:O,sectionCategory:N};y({team:"Search",actionSubType:"Typeahead",actionType:"interact",itemName:"SelectEvent",itemType:"Typeahead",customData:JSON.stringify("LOCATION"===T?{..._,locationId:I}:"QUERY_SUGGESTION"===T?{..._,routeParams:E,buCategory:R,querySuggestionType:S}:{..._})})},[r,e,t,n,d,m,s,u,o,y]),R=l((e,t,a,l,r,n)=>{S(e,t,l,r,a.trackingType,a.key,a.trackingPlaceType||null,a.url,a.searchText,a.locationId,a.suggestionType,a.buCategory,a.routeParameters,n)},[S]);return{logTypeaheadOpened:O,logTypeaheadResultImpression:I,logResultSelection:R,logQuickLinkSelection:l((e,t,a,l)=>{S(e,!0,-1,t,"QUICK_LINK",`QUICK_LINK_${a}`,a,l)},[S]),logSearchAction:l(a=>{y({team:"Search",actionSubType:"Typeahead",actionType:"interact",itemName:"SearchEvent",customData:JSON.stringify({typeaheadId:s,searchSessionId:e,resultsId:t,uiOrigin:r,scope:String(m),beforeQuery:d,afterQuery:n,totalNum:u,errors:o?[o]:null,durationResultsShown:a?Date.now()-a:-1})})},[r,e,t,n,d,m,s,u,o,y]),logResultsChange:l((a,l)=>{y({team:"Search",actionSubType:"Typeahead",actionType:"interact",itemName:"QueryEvent",itemType:"Typeahead",customData:JSON.stringify({typeaheadId:s,searchSessionId:e,resultsId:t,uiOrigin:r,scope:String(m),beforeQuery:d,afterQuery:n,totalNum:u,errors:o?[o]:null,resultLocationIds:a,durationResultsShown:l})})},[r,e,t,n,d,m,s,u,o,y]),logResultsClose:l(a=>{y({team:"Search",actionSubType:"Typeahead",actionType:"interact",itemName:"CloseEvent",itemType:"Typeahead",customData:JSON.stringify({typeaheadId:s,searchSessionId:e,resultsId:t,uiOrigin:r,scope:String(m),beforeQuery:d,afterQuery:n,totalNum:u,errors:o?[o]:null,resultLocationIds:a})})},[r,e,t,n,d,m,s,u,o,y]),startQuery:d,typeaheadId:s}},b={__key:0x84b17ed122fb,id:"84b17ed122fbdbd4",loc:{},definitions:[]},U=(e,t,a,l)=>{var r=null!=a.latitude&&null!=a.longitude,n=E(a.linkType);return`/Search?${new URLSearchParams({q:e,searchSessionId:t,searchNearby:r?"true":"",latitude:null!=a.latitude?String(a.latitude):"",longitude:null!=a.longitude?String(a.longitude):"",geo:r?"":String(a.geoId),...l&&null!=n?{ssrc:n}:{}}).toString()}`},k=(e,t)=>e.linkType?"VACATION_RENTALS"===e.linkType?t.details?.locationV2?.vacationRentalsRoute?.url:t.details?.isGeo===!0?t.details[`${e.linkType}_URL`]:null:null,D=["ACCOMMODATION","EATERY","ATTRACTION","CAR_RENTAL_OFFICE"],P=(e,t,a,l,r,n=!0)=>{var i=[];if(!e||!e.Typeahead_autocomplete||!e.Typeahead_autocomplete.results)return{results:i,resultsId:""};var{results:u,resultsId:o}=e.Typeahead_autocomplete,c=Object.values(u.reduce((e,t)=>{if(t?.__typename==="Typeahead_LocationItem"&&t.details?.placeType!=null&&null!=t.details.localizedName&&t.details.locationV2?.names?.longOnlyHierarchyTypeaheadV2!=null&&null!=t.locationId){var{locationId:a}=t,{localizedName:l,placeType:r}=t.details,n=t.details.locationV2.names.longOnlyHierarchyTypeaheadV2;if(null!=n){var i=l+n+r;if(!Object.keys(e).includes(i)){var u={};u[i]=[],Object.assign(e,u)}e[i].push(a)}}return e},{})).filter(e=>Array.isArray(e)&&e.length>1).flatMap(e=>e),d=e=>{if(null!=e.locationId&&e.details?.locationV2?.names!=null){var t=null!=e.details.placeType&&D.includes(e.details.placeType)&&null!=e.details.streetAddress&&null!=e.details.streetAddress.street1&&c.includes(e.locationId)?e.details.streetAddress.street1:null,a=e.details.locationV2.names.longOnlyHierarchyTypeaheadV2;if(null!=a)return null==t?a:`${t}, ${a}`}return null},T=e=>{var{highlightingInfo:t}=e;if(!t||!t.length)return null;for(var a=[],l=0;l<t.length;l++){var r=t[l];if(!r)return console.error("Typeahead highlighting info is not expected to have null elements"),null;a.push(r)}return a},y=e=>({naturalParentId:e?.details?.locationV2?.hierarchy?.naturalParentId??void 0,naturalParentPlaceType:e?.details?.locationV2?.hierarchy?.naturalParent?.placeType??void 0,naturalParentName:e?.details?.locationV2?.hierarchy?.naturalParent?.names?.name??void 0,parentId:e?.details?.locationV2?.hierarchy?.parentId??void 0,parentLongName:e?.details?.locationV2?.hierarchy?.parent?.names?.longOnlyHierarchyTypeaheadV2??void 0}),p=e=>{if(null!=e.locationId&&e.details&&null!=e.details.localizedName&&null!=e.details.url){var t=!!r||!e.details.isGeo,l=k(a,e);return{searchText:e.details.localizedName,title:e.details.localizedName,highlightingInfo:T(e),url:null!=l?l:e.details.url,image:t?e.details.thumbnail?.photoSizeDynamic:null,key:`LOCATION_${e.documentId}`,subtitle:d(e),hierarchy:y(e),trackingType:"LOCATION",trackingPlaceType:e.details?.placeType,locationId:e.locationId,recent:e.recent}}return null},h=e=>{if(null!=e.text){var r="article"===e.suggestionType,n=e.parentGeoDetails?.names?.longOnlyHierarchyTypeaheadV2,i=r?R:null!=e.buCategory&&f.get(e.buCategory)||S;return{searchText:e.text,title:e.text,highlightingInfo:T(e),subtitle:r?g(s,{id:"typeahead_articles_read_more"}):n,image:null,url:e.route&&e.route.url||U(e.text,t,a,l),icon:i,trackingType:"QUERY_SUGGESTION",suggestionType:e.suggestionType,buCategory:e.buCategory,routeParameters:e.route?{page:e.route.page,params:{...e.route.params}}:null,key:e.documentId,recent:e.recent}}return null},m=e=>null!=e.text?{searchText:e.text,title:g(s,{id:"see_all_results_for",args:{query:e.text}}),url:U(e.text,t,a,l),icon:S,trackingType:"SEARCH",key:`SEARCH_${e.documentId}`,recent:e.recent}:null,O=e=>{if(null!=e.locationId&&null!=e.documentId&&null!=e.listResultType&&null!=e.details&&null!=e.details.localizedName){var t=e.listResultType,a="";if("/ShowForum"===(a="FORUM"===t?e[`${t}ListURL`]?.url||"":e.details[`${t}ListURL`]||"")||""===a)return null;var l=(()=>{switch(t){case"HOTEL":return g(s,{id:"common_Hotels"});case"RESTAURANT":return g(s,{id:"common_Restaurants"});case"ATTRACTION":return g(s,{id:"common_Thingstodo"});case"FORUM":return g(s,{id:"common_Forums"});default:return""}})();i.push({searchText:e.details?.localizedName||"",title:g(s,{id:"m2_trips_detail_date_display",args:{0:l,1:e.details?.localizedName||""}}),subtitle:null!=e.locationId&&e.details?.locationV2?.names!=null?e.details.locationV2.names.longOnlyHierarchyTypeaheadV2:null,url:a,icon:S,image:e.details?.thumbnail?.photoSizeDynamic,trackingType:"LIST_RESULT",locationId:e.locationId,key:`LIST_RESULT_${t}_${e.documentId}`,recent:e.recent})}return null};return u.forEach(e=>{if(null!=e){var t=null;switch(e.__typename){case"Typeahead_LocationItem":t=p(e);break;case"Typeahead_QuerySuggestionItem":t=h(e);break;case"Typeahead_RescueResultItem":t=m(e);break;case"Typeahead_ListResultItem":t=O(e)}t&&(t.label=e.sponsored?g(s,{id:"social_mobile_reason_for_sponsored"}):void 0,i.push(t))}}),n&&i.push({searchText:"",title:g(s,{id:"add_a_missing_place_cta"}),url:"/CreateListing.html",icon:N,trackingType:"AddAPlace",key:"AddAPlace"}),{results:i,resultsId:null==o?"unknown":o}},H={results:[],resultsId:""},G=(e,t)=>e.length>=t,x={batch:!1},Q=["articles"],V=(e,t)=>{var[l,i]=a(e),u=r(Date.now());return n(()=>{var a=Date.now(),l=t-(a-u.current);if(l<=0){u.current=a,i(e);return}var r=setTimeout(()=>{u.current=Date.now(),i(e)},l);return()=>clearTimeout(r)},[e,t]),l},w=({query:e,recentCount:t,source:l,scope:s,searchMode:y,maxItems:p=10,locationTypes:h,providedSearchSessionId:g,isTypeaheadUIRefreshExperiment:m,showArticles:O=!1,showRecentResults:I=!1,scopeSRPToLinkType:S=!1,runQueryOnConfigChange:R=!1,pause:E=!1,minQueryLength:N=1})=>{var[f,C]=a(H),v=_(g),{logTypeaheadOpened:U,logTypeaheadResultImpression:k,logResultSelection:D,logQuickLinkSelection:P,logSearchAction:w,logResultsChange:$,logResultsClose:q,typeaheadId:z}=A(v,f.resultsId,l,e,s,f.results.length),M=V(e,100),F=d(),W=c(),Y=o(),j=null!=s.latitude&&null!=s.longitude?{latitude:s.latitude,longitude:s.longitude}:null,J=null!=s.geoId?s.geoId:0,B="WORLDWIDE";J>1&&"LocationTypeahead"!==y?B="IN_GEO_EXTEND_WORLDWIDE":J>1&&"LocationTypeahead"===y?B="IN_GEO":null!=j&&(B="NEAR_POSITION_EXTEND_WORLDWIDE");var K=s.pageType,X={listResultType:K,searchSessionId:v,typeaheadId:z,uiOrigin:l,routeUid:Y,userLocation:s.userLocation},Z={query:M,recentCount:t,limit:p,scope:B,locale:W,scopeGeoId:J,searchCenter:j,types:["LOCATION","QUERY_SUGGESTION","RESCUE_RESULT",...null!=K?["LIST_RESULT"]:[]],locationTypes:["GEO","AIRPORT","ACCOMMODATION","ATTRACTION","ATTRACTION_PRODUCT","EATERY","NEIGHBORHOOD","AIRLINE","SHOPPING","UNIVERSITY","GENERAL_HOSPITAL","PORT","FERRY","CORPORATION","VACATION_RENTAL","SHIP","CRUISE_LINE","CAR_RENTAL_OFFICE"],userId:F,context:X,enabledFeatures:O?Q:void 0,includeRecent:I};"GeoPicker"===y&&l.includes("RESTAURANTS")||"LinkTypeSearch"===y&&"RESTAURANTS"===s.linkType?(Z.types=["LOCATION","RESCUE_RESULT"],Z.locationTypes=["GEO","NEIGHBORHOOD","EATERY"]):"GeoPicker"===y&&l.includes("HOTELS")||"LinkTypeSearch"===y&&"HOTELS"===s.linkType?(Z.types=["LOCATION","RESCUE_RESULT"],Z.locationTypes=["GEO","NEIGHBORHOOD","ACCOMMODATION"]):"GeoPicker"===y&&l.includes("ATTRACTIONS")||"LinkTypeSearch"===y&&"ATTRACTIONS"===s.linkType?(Z.types=["LOCATION","RESCUE_RESULT"],Z.locationTypes=["GEO","ATTRACTION","ATTRACTION_PRODUCT","NEIGHBORHOOD"]):"GeoPicker"===y?(Z.types=["LOCATION","RESCUE_RESULT"],Z.locationTypes=["GEO","NEIGHBORHOOD"]):"LocationTypeahead"===y&&(Z.types=["LOCATION"],h&&(Z.locationTypes=h));var[{data:ee,error:et,fetching:ea},el]=T({query:b,variables:{request:Z},context:x,pause:!0}),er=r(el);n(()=>{er.current=el});var en=""!==M;n(()=>{et||C(L(ee,v,s,S,m,en))},[ee,et,v,s,S,m,en]);var ei=!i(u(Z),Z);return n(()=>{R||E||(G(M,N)?er.current():C(H))},[R,M,N,E]),n(()=>{R&&ei&&!E&&(G(M,N)?er.current():C(H))},[R,ei,M,N,E]),{results:f,logTypeaheadOpened:U,logTypeaheadResultImpression:k,logResultSelection:D,logQuickLinkSelection:P,logSearchAction:w,logResultsChange:$,logResultsClose:q,searchSessionId:v,fetching:ea,error:et}};return[()=>{_=C,A=v,f=new Map([["SEARCH",S],["ATTRACTIONS",m],["HOTELS",O],["RESTAURANTS",I]]),L=P,e("default",w)},[e=>(a=e.useState,l=e.useCallback,r=e.useRef,n=e.useEffect),e=>i=e.default,e=>u=e.default,e=>o=e.usePageviewUid,e=>(s=e.default,c=e.useLocale),e=>d=e.useUserId,e=>T=e.useQuery,e=>y=e.useStableRandom,e=>p=e.default,e=>h=e.default,e=>g=e.jsx,e=>m=e.default,e=>O=e.default,e=>I=e.default,e=>S=e.default,e=>R=e.default,e=>E=e.getSRPCategory,e=>N=e.default]]},["o4yt4q","b5nukb","dlu2yg","fgwvq1","7thqz4","52far5","mqwhqn","uc42ar","r73jw8","xg719z","21h32l","s1ymgp","c5q3iu","o3mm96","qx89h8","j1i9fl","hwdnu5","flcs8h"]]);
